@page "/agendamentos"
@inherits IndexPage

<PageTitle>Agendamentos</PageTitle>

<MudText Typo="Typo.h3">Agendamentos</MudText>

<MudButton Variant="Variant.Filled"
           StartIcon="@Icons.Material.Filled.Add"
           Color="Color.Info"
           Size="Size.Large"
           Href="/agendamentos/criar"
           Class="mt-md-4 mb-4">
    Novo Agendamento
</MudButton>

<MudStack Row Wrap="Wrap.Wrap">
    @foreach (var appointment in Appointments)
    {
        <MudPaper Class="pa-4 mt-4 border-dashed"
                  Outlined="true">
            <MudText Class="d-flex justify-center"
                     Typo="Typo.h5">Agendamentos</MudText>

            <MudStack Row Class="mt-4">
                <MudText>Dr. @appointment.Doctor.Name</MudText>
                <MudIcon Icon="@Icons.Material.Filled.Timer" />
                <MudText>@appointment.Patient.Name</MudText>
            </MudStack>

            <MudText Class="mt-4" Typo="Typo.body2">@(appointment.Observation ?? "Sem observações...")</MudText>

            <MudDivider Class="mt-4 mb-4" />

            <MudStack Row Class="d-flex justify-content-between mt-4 mb-2">
                <MudChip Color="Color.Primary">@appointment.Date.ToString("dd/MM/yyyy") às @appointment.Time.ToString("HH:mm")</MudChip>
                <MudFab Size="Size.Small" @onclick="@(()=>Delete(appointment))"
                        StartIcon="@Icons.Material.Filled.Delete"
                        Color="Color.Secondary"
                        hidden="@HideButtons" />
            </MudStack>
        </MudPaper>
    }
</MudStack>
